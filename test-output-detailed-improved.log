[1;33mTesting Database Connection...[0m
Starting enhanced database connection test
Session ID: test_1741629320141_d4f9ci4n
Setting up test schema: test_test_1741629320141_d4f9ci4n
Created temporary .env.test file
(node:37856) Warning: Setting the NODE_TLS_REJECT_UNAUTHORIZED environment variable to '0' makes TLS connections and HTTPS requests insecure by disabling certificate verification.
(Use `node --trace-warnings ...` to show where the warning was created)
Connected to database for schema setup
Dropped schema test_test_1741629320141_d4f9ci4n if it existed
Created schema test_test_1741629320141_d4f9ci4n
Set search path to test_test_1741629320141_d4f9ci4n
Schema test_test_1741629320141_d4f9ci4n verified
Closed schema setup connection
Pushing Prisma schema to database...
Environment variables loaded from .env
Prisma schema loaded from prisma/schema.prisma
Datasource "db": PostgreSQL database "postgres", schema "test_test_1741629320141_d4f9ci4n" at "aws-0-us-east-1.pooler.supabase.com:6543"

Error: P1017: Server has closed the connection.
Error pushing Prisma schema: Error: Command failed: npx prisma db push --skip-generate
    at checkExecSyncError (node:child_process:890:11)
    at execSync (node:child_process:962:15)
    at pushPrismaSchema (/Users/jessedarsinos/VowSwapping/test-connection-fix.js:151:5)
    at main (/Users/jessedarsinos/VowSwapping/test-connection-fix.js:303:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {
  status: 1,
  signal: null,
  output: [ null, null, null ],
  pid: 37857,
  stdout: null,
  stderr: null
}
Database connection test failed: Error: Command failed: npx prisma db push --skip-generate
    at checkExecSyncError (node:child_process:890:11)
    at execSync (node:child_process:962:15)
    at pushPrismaSchema (/Users/jessedarsinos/VowSwapping/test-connection-fix.js:151:5)
    at main (/Users/jessedarsinos/VowSwapping/test-connection-fix.js:303:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {
  status: 1,
  signal: null,
  output: [ null, null, null ],
  pid: 37857,
  stdout: null,
  stderr: null
}
Cleaning up test resources...
Removed temporary .env.test file
Connected to database for cleanup
Dropped schema test_test_1741629320141_d4f9ci4n
Closed cleanup connection
[0;31mâœ— Database connection failed[0m
See test-output-detailed-improved.log for details
